<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Entradas por Artículo vs Precio</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      margin: 0;
    }

    .chart-container {
      width: 100%;
      height: 500px; /* Puedes aumentar según tu necesidad */
      position: relative;
    }

    canvas {
      width: 100% !important;
      height: 100% !important;
    }
  </style>
</head>
<body>

<h2>Entradas por Artículo y Precio del Producto Final</h2>
<div class="chart-container">
  <canvas id="graficoEntradasPrecios"></canvas>
</div>

<script>
const ctx = document.getElementById('graficoEntradasPrecios').getContext('2d');

const labels = ['08-06-2025', '31-06-2025', '31-07-2025', '31-08-2025', '31-09-2025'];

const data = {
  labels: labels,
  datasets: [
    {
      type: 'line',
      label: 'Precio Final (€/kg)',
      data: [3.666, 3.666, 3.666, 3.666],
      borderColor: 'red',
      backgroundColor: 'green',
      yAxisID: 'y1',
      tension: 0.3,
      fill: false
    },
    {
      type: 'bar',
      label: 'Artículo 40096 (3.953 €/kg)',
      data: [1980, 2560, 0, 0],
      backgroundColor: 'rgba(54, 162, 235, 0.7)',
      stack: 'entradas',
      yAxisID: 'y'
    },
    {
      type: 'bar',
      label: 'Artículo 40095 (3.954 €/kg)',
      data: [14220, 32700, 0, 0],
      backgroundColor: 'rgba(255, 159, 64, 0.7)',
      stack: 'entradas',
      yAxisID: 'y'
    },
    {
      type: 'bar',
      label: 'Artículo 40295 (4.067 / 3.849 €/kg)',
      data: [39662.5, 0, 0, 0],
      backgroundColor: 'rgba(153, 102, 255, 0.7)',
      stack: 'entradas',
      yAxisID: 'y'
    },
    {
      type: 'bar',
      label: 'Artículo 40096 (4.229 €/kg)',
      data: [24000, 24000, 0, 0],
      backgroundColor: 'rgba(75, 192, 192, 0.7)',
      stack: 'entradas',
      yAxisID: 'y'
    },
    //    {
    //      type: 'line',
    //      label: 'Precio Estimado c/Entradas (€/kg)',
    //      data: [4.0427, 4.0480, 4.0480, 4.0480],
    //      borderColor: 'green',
    //      backgroundColor: 'red',
    //      borderDash: [5, 5],
    //      yAxisID: 'y1',
    //      tension: 0.3,
    //      fill: false
    //    }
  ]
};

const config = {
  type: 'bar',
  data: data,
  options: {
    responsive: true,
    maintainAspectRatio: false,
    interaction: {
      mode: 'index',
      intersect: false
    },
    plugins: {
      title: {
        display: true,
        text: 'Entradas diferenciadas por Artículo vs Precio Final'
      }
    },
    scales: {
      y: {
        type: 'linear',
        position: 'left',
        stacked: true,
        title: {
          display: true,
          text: 'Entradas (kg)'
        }
      },
      y1: {
        type: 'linear',
        position: 'right',
        title: {
          display: true,
          text: '€/kg'
        },
        grid: {
          drawOnChartArea: false
        }
      }
    }
  },
};

new Chart(ctx, config);
</script>

</body>
</html>
